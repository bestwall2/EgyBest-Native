
I need you to fix a critical bug and build a React Native streaming app using TMDB API. When I click on a movie or series, the detail page shows "Failed to load details" with a black screen. Fix this by implementing proper error handling, null checks for API responses, retry mechanisms, and loading states. Ensure the app works on both iOS and Android with identical features.
Build a modern streaming app with a navigation bar that has a dark transparent background, settings icon on the left, "EGYBEST" logo in red bold text centered, and search icon on the right. The navbar should be fixed at the top with 60-70px height and include safe area handling for notches.
Create a full-screen hero section with the movie backdrop image from TMDB API as background, with a dark gradient overlay from transparent to black. Add a red rounded badge in the top-left showing content info. Display the movie title logo as an image from TMDB's images API endpoint (use the logos array), or fallback to large bold text if no logo exists. Below the title, show the movie description in white text, limited to 3 lines.
Add two horizontally aligned buttons below the description: a white "PLAY" button with a play icon, and a dark transparent "INFO" button with an info icon and white border. Below the buttons, add progress indicator dots showing the current position in the carousel - active dots should be red pill-shaped (24x8px) and inactive dots should be white circles (8x8px) with 30% opacity.
Implement a horizontal carousel for the hero section using trending content from TMDB, with auto-play every 5-7 seconds, swipe gestures, and smooth snap-to-item behavior. When users click INFO, navigate to a detailed screen with full cast, trailers, and recommendations. When clicking PLAY, show a toast or navigate to a player screen.
Use proper TMDB API endpoints: /trending/all/week for carousel, /movie/{id} or /tv/{id} for details, and /movie/{id}/images or /tv/{id}/images for logo images. Handle cases where backdrop_path, poster_path, or logo images are null with appropriate fallbacks. Store the API key securely using environment variables.
Apply smooth animations using React Native Reanimated, use react-native-fast-image for image caching, and implement skeleton loading screens. Add proper TypeScript types for all API responses and components. Include error states with retry buttons, loading states with shimmer effects, and success states with fade-in animations.
Ensure cross-platform compatibility with platform-specific code for iOS safe areas, Android status bar, haptic feedback on iOS, and ripple effects on Android. Test on multiple screen sizes and orientations. Provide complete source code, package.json, environment setup instructions, and a README with TMDB API key configuration steps.